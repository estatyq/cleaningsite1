# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Edge Function –¥–ª—è –ë–ª–∏—Å–∫–ö–ª—ñ–Ω—ñ–Ω–≥ üöÄ

## –ü—Ä–æ–±–ª–µ–º–∞ "Failed to fetch"

–Ø–∫—â–æ –≤–∏ –±–∞—á–∏—Ç–µ –ø–æ–º–∏–ª–∫—É `TypeError: Failed to fetch`, —Ü–µ –æ–∑–Ω–∞—á–∞—î —â–æ Edge Function —â–µ –Ω–µ —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–∞ –∞–±–æ –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞.

---

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

**–•–æ—Ä–æ—à—ñ –Ω–æ–≤–∏–Ω–∏:** Edge Function —Ä–æ–∑–≥–æ—Ä—Ç–∞—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ!

### –©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:

1. **–ü–µ—Ä—à–∏–π –∑–∞–ø–∏—Ç** –¥–æ API –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ç—Ä–∏–≥–µ—Ä–∏—Ç—å —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è
2. **–†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –∑–∞–π–º–∞—î** 15-30 —Å–µ–∫—É–Ω–¥
3. **–ü—ñ—Å–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è** –≤—Å–µ –ø—Ä–∞—Ü—é—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

### –©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑—Ä–æ–±–∏—Ç–∏:

**–ù–Ü–ß–û–ì–û!** –ü—Ä–æ—Å—Ç–æ:
1. –ó–∞—á–µ–∫–∞–π—Ç–µ 30 —Å–µ–∫—É–Ω–¥
2. –û–Ω–æ–≤—ñ—Ç—å —Å—Ç–æ—Ä—ñ–Ω–∫—É (F5)
3. –°–ø—Ä–æ–±—É–π—Ç–µ –∑–Ω–æ–≤—É

---

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É –≤ Supabase Dashboard

### –ö—Ä–æ–∫ 1: –í—ñ–¥–∫—Ä–∏–π—Ç–µ Dashboard

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ https://supabase.com
2. –í–∏–±–µ—Ä—ñ—Ç—å –≤–∞—à –ø—Ä–æ–µ–∫—Ç
3. –£ –ª—ñ–≤–æ–º—É –º–µ–Ω—é –∑–Ω–∞–π–¥—ñ—Ç—å **Edge Functions**

### –ö—Ä–æ–∫ 2: –ó–Ω–∞–π–¥—ñ—Ç—å —Ñ—É–Ω–∫—Ü—ñ—é "server"

–í–∏ –º–∞—î—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é –∑ –Ω–∞–∑–≤–æ—é **server**

**–°—Ç–∞—Ç—É—Å–∏:**

| –°—Ç–∞—Ç—É—Å | –©–æ —Ü–µ –æ–∑–Ω–∞—á–∞—î | –©–æ —Ä–æ–±–∏—Ç–∏ |
|--------|---------------|-----------|
| üü¢ **Active** | –í—Å–µ –ø—Ä–∞—Ü—é—î! | –ù—ñ—á–æ–≥–æ, –∫–æ—Ä–∏—Å—Ç—É–π—Ç–µ—Å—å! |
| üü° **Deploying** | –†–æ–∑–≥–æ—Ä—Ç–∞—î—Ç—å—Å—è | –ó–∞—á–µ–∫–∞–π—Ç–µ 15 —Å–µ–∫—É–Ω–¥ |
| üî¥ **Error** | –ü–æ–º–∏–ª–∫–∞ | –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –ª–æ–≥–∏ |
| ‚ö™ **Not Found** | –ù–µ —ñ—Å–Ω—É—î | –ê–≤—Ç–æ—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–∏ –∑–∞–ø–∏—Ç—ñ |

### –ö—Ä–æ–∫ 3: –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –ª–æ–≥–∏

1. –ö–ª—ñ–∫–Ω—ñ—Ç—å –Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—é **server**
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Logs**
3. –í–∏–±–µ—Ä—ñ—Ç—å —Ñ—ñ–ª—å—Ç—Ä: **Last 15 minutes**

**–©–æ —à—É–∫–∞—Ç–∏:**

‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω—ñ –ª–æ–≥–∏:**
```
üöÄ Server starting...
üìç Base path: /make-server-4e0b1fee
üîë Admin password: admin123
GET /make-server-4e0b1fee/health
```

‚ùå **–ü–æ–º–∏–ª–∫–∏:**
```
Error: ...
Failed to ...
Cannot ...
```

---

## –†—É—á–Ω–µ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)

–Ø–∫—â–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –Ω–µ –ø—Ä–∞—Ü—é—î, –º–æ–∂–Ω–∞ –∑—Ä–æ–±–∏—Ç–∏ –≤—Ä—É—á–Ω—É:

### –ß–µ—Ä–µ–∑ Supabase CLI:

```bash
# –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å Supabase CLI (–æ–¥–∏–Ω —Ä–∞–∑)
npm install -g supabase

# –£–≤—ñ–π–¥—ñ—Ç—å –≤ –∞–∫–∞—É–Ω—Ç
supabase login

# –ó–≤'—è–∂—ñ—Ç—å –ø—Ä–æ–µ–∫—Ç
supabase link --project-ref –≤–∞—à-project-id

# –†–æ–∑–≥–æ—Ä–Ω—ñ—Ç—å —Ñ—É–Ω–∫—Ü—ñ—é
supabase functions deploy server
```

### –ß–µ—Ä–µ–∑ Dashboard:

1. Edge Functions ‚Üí **Create a new function**
2. –ù–∞–∑–≤–∞: `server`
3. –°–∫–æ–ø—ñ—é–π—Ç–µ –∫–æ–¥ –∑ `/supabase/functions/server/index.tsx`
4. –í—Å—Ç–∞–≤—Ç–µ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä
5. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **Deploy**

---

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑'—î–¥–Ω–∞–Ω–Ω—è

### –ú–µ—Ç–æ–¥ 1: –ß–µ—Ä–µ–∑ –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å (–Ω–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏–π)

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞"**
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"–ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Ç–µ—Å—Ç–∏"**
4. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏

**–û—á—ñ–∫—É—î—Ç—å—Å—è:**
```
‚úÖ –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
‚úÖ –ó'—î–¥–Ω–∞–Ω–Ω—è –∑ Edge Function
‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
‚úÖ Orders API
```

### –ú–µ—Ç–æ–¥ 2: –ß–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä

–í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤ –Ω–æ–≤—ñ–π –≤–∫–ª–∞–¥—Ü—ñ:
```
https://–≤–∞—à-project-id.supabase.co/functions/v1/make-server-4e0b1fee/health
```

**–û—á—ñ–∫—É—î—Ç—å—Å—è:**
```json
{"status":"ok"}
```

### –ú–µ—Ç–æ–¥ 3: –ß–µ—Ä–µ–∑ curl (—Ç–µ—Ä–º—ñ–Ω–∞–ª)

```bash
curl https://–≤–∞—à-project-id.supabase.co/functions/v1/make-server-4e0b1fee/health
```

**–û—á—ñ–∫—É—î—Ç—å—Å—è:**
```json
{"status":"ok"}
```

---

## –©–æ –±—É–ª–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. CORS Headers ‚úÖ

**–ë—É–ª–æ:**
```typescript
allowHeaders: ["Content-Type", "Authorization"]
```

**–°—Ç–∞–ª–æ:**
```typescript
allowHeaders: ["Content-Type", "Authorization", "X-Admin-Password"]
```

**–ß–æ–º—É –≤–∞–∂–ª–∏–≤–æ:** –ë–µ–∑ `X-Admin-Password` –≤ headers, –±—Ä–∞—É–∑–µ—Ä –±–ª–æ–∫—É—î –∑–∞–ø–∏—Ç–∏ –∑ –ø–∞—Ä–æ–ª–µ–º.

### 2. –õ–æ–≥—É–≤–∞–Ω–Ω—è ‚úÖ

–î–æ–¥–∞–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è –Ω–∞:
- **–ö–ª—ñ—î–Ω—Ç—ñ** (–∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞)
- **–°–µ—Ä–≤–µ—Ä—ñ** (Edge Function logs)

### 3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑'—î–¥–Ω–∞–Ω–Ω—è ‚úÖ

–°—Ç–≤–æ—Ä–µ–Ω–æ —É—Ç–∏–ª—ñ—Ç—É `checkConnection()` —è–∫–∞:
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
- –†–æ–±–∏—Ç—å health check
- –ü–æ–≤–µ—Ä—Ç–∞—î –¥–µ—Ç–∞–ª—å–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é

### 4. –Ü–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ñ –ø–æ–º–∏–ª–∫–∏ ‚úÖ

–ó–∞–º—ñ—Å—Ç—å:
```
TypeError: Failed to fetch
```

–¢–µ–ø–µ—Ä:
```
Cannot connect to Edge Function at https://...
Please ensure:
1. Edge Function is deployed in Supabase Dashboard
2. Project ID is correct: wewzibxknwahyykczzzi
3. Check your internet connection
4. Check browser console for CORS errors
```

---

## –ß–∞—Å—Ç—ñ –ø–∏—Ç–∞–Ω–Ω—è

### Q: –Ø–∫ –¥–æ–≤–≥–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞—î—Ç—å—Å—è —Ñ—É–Ω–∫—Ü—ñ—è?
**A:** 15-30 —Å–µ–∫—É–Ω–¥ –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—ñ. –ù–∞—Å—Ç—É–ø–Ω—ñ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è - 5-10 —Å–µ–∫—É–Ω–¥.

### Q: –ß–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ—ó –∑–º—ñ–Ω–∏ –∫–æ–¥—É?
**A:** –ù—ñ, —è–∫—â–æ –≤–∏ –∑–º—ñ–Ω—é—î—Ç–µ –∫–æ–¥ –ª–æ–∫–∞–ª—å–Ω–æ. –¢–∞–∫, —è–∫—â–æ —Ö–æ—á–µ—Ç–µ –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –∑–º—ñ–Ω–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ.

### Q: –§—É–Ω–∫—Ü—ñ—è –ø–æ—Å—Ç—ñ–π–Ω–æ –ø–æ–∫–∞–∑—É—î "Deploying"
**A:** –ó–∞—á–µ–∫–∞–π—Ç–µ 2 —Ö–≤–∏–ª–∏–Ω–∏. –Ø–∫—â–æ –Ω–µ –∑–º—ñ–Ω–∏–ª–æ—Å—å - –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Å—Ç–æ—Ä—ñ–Ω–∫—É Dashboard.

### Q: –ü–æ–º–∏–ª–∫–∞ "CORS policy"
**A:** –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ –≤ `/supabase/functions/server/index.tsx` –¥–æ–¥–∞–Ω–æ `X-Admin-Password` –≤ `allowHeaders`.

### Q: –ü–æ–º–∏–ª–∫–∞ "401 Unauthorized"
**A:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `admin123` –∞–±–æ —Ç–æ–π —â–æ –≤–∫–∞–∑–∞–ª–∏ –≤ –∫–æ–¥—ñ.

### Q: API –ø–æ–≤–µ—Ä—Ç–∞—î 404
**A:** –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ URL –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π. –ú–∞—î –±—É—Ç–∏ `/make-server-4e0b1fee/...`

---

## –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

### –î–µ –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:

**Project ID —Ç–∞ Anon Key:**
```typescript
// /utils/supabase/info.tsx
export const projectId = "wewzibxknwahyykczzzi"
export const publicAnonKey = "eyJhbGci..."
```

**Admin Password:**
```typescript
// /supabase/functions/server/index.tsx (—Ä—è–¥–æ–∫ 24)
const ADMIN_PASSWORD = "admin123";
```

**API URL:**
```typescript
// /utils/api.ts (—Ä—è–¥–æ–∫ 3)
const API_URL = `https://${projectId}.supabase.co/functions/v1/make-server-4e0b1fee`;
```

---

## –õ–æ–≥–∏ –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è

### –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12):

–í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤–∫–ª–∞–¥–∫—É Console —ñ —à—É–∫–∞–π—Ç–µ:

**–ü—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ:**
```javascript
üîß API Configuration: { projectId: "...", apiUrl: "...", hasAnonKey: true }
```

**–ü—Ä–∏ –∑–∞–ø–∏—Ç—ñ:**
```javascript
üì° API Call: { endpoint: "/orders", url: "...", method: "GET" }
üì° Response: { status: 200, statusText: "OK", ok: true }
‚úÖ Response data: { success: true, data: [...] }
```

**–ü—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ:**
```javascript
‚ùå API call failed for /orders: TypeError: Failed to fetch
```

### Edge Function logs (Dashboard):

```
GET /make-server-4e0b1fee/orders - Request received
Password header present: true
Auth check successful
GET /make-server-4e0b1fee/orders - Found 5 orders
```

---

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∏–π —Å–ø–∏—Å–æ–∫

–ü–µ—Ä–µ–¥ –ø–æ—á–∞—Ç–∫–æ–º —Ä–æ–±–æ—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ:

- [ ] Supabase –ø—Ä–æ–µ–∫—Ç —Å—Ç–≤–æ—Ä–µ–Ω–∏–π
- [ ] Project ID —Ç–∞ Anon Key –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ
- [ ] Edge Function —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–∞ (—Å—Ç–∞—Ç—É—Å Active)
- [ ] Health check –ø–æ–≤–µ—Ä—Ç–∞—î `{"status":"ok"}`
- [ ] –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—É—î –≤—Å—ñ –∑–µ–ª–µ–Ω—ñ —Ç–µ—Å—Ç–∏
- [ ] –ö–æ–Ω—Å–æ–ª—å –Ω–µ –ø–æ–∫–∞–∑—É—î –ø–æ–º–∏–ª–æ–∫ CORS
- [ ] –ü–∞—Ä–æ–ª—å –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π (admin123)

**–Ø–∫—â–æ –≤—Å—ñ –ø—É–Ω–∫—Ç–∏ –≤—ñ–¥–º—ñ—á–µ–Ω—ñ** ‚úÖ - —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–æ —Ä–æ–±–æ—Ç–∏!

---

## –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:**
- `README.md` - –ó–∞–≥–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è
- `TROUBLESHOOTING.md` - –£—Å—É–Ω–µ–Ω–Ω—è –Ω–µ—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π
- `DEBUG_ORDERS.md` - –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–º–æ–≤–ª–µ–Ω—å
- `QUICK_FIX.md` - –®–≤–∏–¥–∫—ñ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è
- `CHECKLIST.md` - –ü–æ–∫—Ä–æ–∫–æ–≤—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó

**–Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏:**
- –í–∫–ª–∞–¥–∫–∞ "–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞" –≤ –∞–¥–º—ñ–Ω—Ü—ñ
- –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
- Supabase Dashboard ‚Üí Edge Functions ‚Üí Logs

---

**–í–µ—Ä—Å—ñ—è**: 2.1  
**–î–∞—Ç–∞**: 10 –ª–∏—Å—Ç–æ–ø–∞–¥–∞ 2025  
**–°—Ç–∞—Ç—É—Å**: –ì–æ—Ç–æ–≤–æ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è ‚úÖ
