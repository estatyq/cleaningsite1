# ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–∫–∏ "Unauthorized" –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –º–µ–¥—ñ–∞ –≤ –≥–∞–ª–µ—Ä–µ—é

## üêõ –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ —Å–ø—Ä–æ–±—ñ –¥–æ–¥–∞—Ç–∏ —Ñ–æ—Ç–æ –∞–±–æ –≤—ñ–¥–µ–æ –≤ –≥–∞–ª–µ—Ä–µ—é –≤–∏–Ω–∏–∫–∞–ª–∞ –ø–æ–º–∏–ª–∫–∞ **"Unauthorized"**, –Ω–∞–≤—ñ—Ç—å –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º –ø–∞—Ä–æ–ª–µ–º.

## üîç –ü—Ä–∏—á–∏–Ω–∞
**–ù–µ—É–∑–≥–æ–¥–∂–µ–Ω—ñ—Å—Ç—å –º—ñ–∂ frontend —Ç–∞ backend:**

- **Frontend** (`GalleryManager.tsx`) –ø–µ—Ä–µ–¥–∞–≤–∞–≤ –ø–∞—Ä–æ–ª—å —á–µ—Ä–µ–∑ HTTP header:
  ```javascript
  headers: {
    'X-Admin-Password': password
  }
  ```

- **Backend** (`/supabase/functions/server/index.tsx`) –æ—á—ñ–∫—É–≤–∞–≤ –ø–∞—Ä–æ–ª—å –≤ body JSON:
  ```javascript
  const { password, url, type, description } = body;
  ```

## ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

–ó–º—ñ–Ω–µ–Ω–æ backend –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—è –∑ header (–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ –∑ —ñ–Ω—à–∏–º–∏ –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏):

### –ë—É–ª–æ:
```typescript
app.post("/make-server-4e0b1fee/gallery", async (c) => {
  const body = await c.req.json();
  const { password, url, type, description } = body;
  
  if (!(await checkAuth(password))) {
    return c.json({ success: false, error: "Unauthorized" }, 401);
  }
  // ...
});
```

### –°—Ç–∞–ª–æ:
```typescript
app.post("/make-server-4e0b1fee/gallery", async (c) => {
  const body = await c.req.json();
  const { url, type, description } = body;
  const password = c.req.header("X-Admin-Password");
  
  if (!(await checkAuth(password || ""))) {
    return c.json({ success: false, error: "Unauthorized" }, 401);
  }
  // ...
});
```

## üìù –î–æ–¥–∞—Ç–∫–æ–≤–æ
–î–æ–¥–∞–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è –¥–ª—è –ª–µ–≥—à–æ–≥–æ –¥–µ–±–∞–≥—É:

```typescript
console.log(`üñºÔ∏è Gallery POST request - type: ${type}, has password: ${!!password}`);
// –ü—Ä–∏ —É—Å–ø—ñ—Ö—É:
console.log('‚úÖ Gallery item added:', { id: item.id, type: item.type });
// –ü—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó:
console.log("‚ùå Gallery add failed: Unauthorized");
```

## üß™ –Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏

### 1. –õ–æ–∫–∞–ª—å–Ω–æ (—è–∫—â–æ –∑–∞–ø—É—Å–∫–∞—î—Ç–µ Supabase locally)
```bash
# –í –∫–æ–Ω—Å–æ–ª—ñ backend –≤–∏ –º–∞—î—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏:
üñºÔ∏è Gallery POST request - type: photo, has password: true
‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è —É—Å–ø—ñ—à–Ω–∞
‚úÖ Gallery item added: { id: '1234567890', type: 'photo' }
```

### 2. –í –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—ñ
1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ `/admin`
2. –£–≤—ñ–π–¥—ñ—Ç—å –∑ –ø–∞—Ä–æ–ª–µ–º
3. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤–∫–ª–∞–¥–∫—É **"–ì–∞–ª–µ—Ä–µ—è"**
4. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"–î–æ–¥–∞—Ç–∏"**
5. –í–∏–±–µ—Ä—ñ—Ç—å —Ç–∏–ø: **–§–æ—Ç–æ** –∞–±–æ **–í—ñ–¥–µ–æ**
6. –í–≤–µ–¥—ñ—Ç—å URL (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∑ Unsplash –¥–ª—è —Ñ–æ—Ç–æ –∞–±–æ YouTube –¥–ª—è –≤—ñ–¥–µ–æ)
7. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"–î–æ–¥–∞—Ç–∏"**
8. ‚úÖ –ú–∞—î –∑'—è–≤–∏—Ç–∏—Å—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è **"–î–æ–¥–∞–Ω–æ –¥–æ –≥–∞–ª–µ—Ä–µ—ó!"**

### 3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª—ñ –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
–ü—Ä–∏ —É—Å–ø—ñ—à–Ω–æ–º—É –¥–æ–¥–∞–≤–∞–Ω–Ω—ñ –Ω–µ –º–∞—î –±—É—Ç–∏ –ø–æ–º–∏–ª–æ–∫ 401.

## üìä –°—Ç–∞—Ç—É—Å API endpoints

| Endpoint | –ú–µ—Ç–æ–¥ | –ü–∞—Ä–æ–ª—å –∑ | –°—Ç–∞—Ç—É—Å |
|----------|-------|----------|--------|
| `/gallery` | GET | - | ‚úÖ –ü—Ä–∞—Ü—é—î |
| `/gallery` | POST | Header | ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ |
| `/gallery/:id` | DELETE | Header | ‚úÖ –ü—Ä–∞—Ü—é—î |

## üîê –Ü–Ω—à—ñ endpoints (–¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É)

–ë—ñ–ª—å—à—ñ—Å—Ç—å —ñ–Ω—à–∏—Ö admin endpoints –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –ø–∞—Ä–æ–ª—å –∑ body JSON:

| Endpoint | –ü–∞—Ä–æ–ª—å –∑ |
|----------|----------|
| `/branding` (POST) | Body |
| `/services` (POST) | Body |
| `/blog` (POST) | Body |
| `/reviews/:id/approve` (POST) | Header |
| `/orders/:id/status` (PATCH) | Header |

**–¶–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!** –†—ñ–∑–Ω—ñ –ø—ñ–¥—Ö–æ–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–æ–≥–æ, —á–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `utils/api.ts` (body) —á–∏ –ø—Ä—è–º–∏–π fetch (header).

## üöÄ –î–µ–ø–ª–æ–π

–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:

1. **–Ø–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ Git:**
   ```bash
   git add .
   git commit -m "üêõ Fix: Unauthorized error –ø—Ä–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—ñ –º–µ–¥—ñ–∞ –≤ –≥–∞–ª–µ—Ä–µ—é"
   git push
   ```

2. **–Ø–∫—â–æ –¥–µ–ø–ª–æ—ó–ª–∏ –Ω–∞ Vercel:**
   - Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–¥–µ–ø–ª–æ—ó—Ç—å –ø—ñ—Å–ª—è push
   - –ê–±–æ –∑—Ä–æ–±—ñ—Ç—å —Ä—É—á–Ω–∏–π redeploy –≤ Vercel Dashboard

3. **–Ø–∫—â–æ –¥–µ–ø–ª–æ—ó–ª–∏ –Ω–∞ Netlify:**
   - Netlify –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–¥–µ–ø–ª–æ—ó—Ç—å –ø—ñ—Å–ª—è push
   - –ê–±–æ –∑—Ä–æ–±—ñ—Ç—å —Ä—É—á–Ω–∏–π redeploy –≤ Netlify Dashboard

## ‚ú® –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä –≤–∏ –º–æ–∂–µ—Ç–µ:
- ‚úÖ –î–æ–¥–∞–≤–∞—Ç–∏ —Ñ–æ—Ç–æ –≤ –≥–∞–ª–µ—Ä–µ—é
- ‚úÖ –î–æ–¥–∞–≤–∞—Ç–∏ –≤—ñ–¥–µ–æ –≤ –≥–∞–ª–µ—Ä–µ—é  
- ‚úÖ –í–∏–¥–∞–ª—è—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç–∏ –∑ –≥–∞–ª–µ—Ä–µ—ó
- ‚úÖ –í—Å–µ –ø—Ä–∞—Ü—é—î –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—î—é

## üìû –Ø–∫—â–æ –≤—Å–µ —â–µ –Ω–µ –ø—Ä–∞—Ü—é—î

1. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø–∞—Ä–æ–ª—å:**
   - –§–∞–π–ª: `CURRENT_PASSWORD.txt`
   - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π: `admin123`

2. **–û—á–∏—Å—Ç—ñ—Ç—å –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞:**
   - Chrome/Edge: `Ctrl + Shift + Delete`
   - Firefox: `Ctrl + Shift + Delete`
   - –û–±–µ—Ä—ñ—Ç—å "Cached images and files"

3. **–ü–µ—Ä–µ–∑–∞–π–¥—ñ—Ç—å –≤ –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å:**
   - –í–∏–π–¥—ñ—Ç—å —Ç–∞ —É–≤—ñ–π–¥—ñ—Ç—å –∑–Ω–æ–≤—É
   - –¶–µ –æ–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å –≤ session

4. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12):**
   - –í–∫–ª–∞–¥–∫–∞ "Console"
   - –í–∫–ª–∞–¥–∫–∞ "Network" ‚Üí —Ñ—ñ–ª—å—Ç—Ä "gallery"
   - –ü–æ–¥–∏–≤—ñ—Ç—å—Å—è –Ω–∞ Request Headers

---

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω–æ:** 2025-11-11  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –¥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
