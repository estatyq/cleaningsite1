# ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫ 401 (Unauthorized)

## –ü—Ä–æ–±–ª–µ–º–∞

–ö–æ–ª–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤–æ–¥–∏—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å:
- ‚ùå API –ø–æ–≤–µ—Ä—Ç–∞—î 401 –ø–æ–º–∏–ª–∫—É
- ‚ùå –ü–æ–∫–∞–∑—É—é—Ç—å—Å—è –º–Ω–æ–∂–∏–Ω–Ω—ñ toast –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- ‚ùå –ù–µ–∑—Ä–æ–∑—É–º—ñ–ª–æ, —â–æ —Ä–æ–±–∏—Ç–∏ –¥–∞–ª—ñ
- ‚ùå –ù–µ–º–∞—î —á—ñ—Ç–∫–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å

## –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

### 1. **–ü–æ–∫—Ä–∞—â–µ–Ω–∞ –æ–±—Ä–æ–±–∫–∞ 401 –≤ API** (`/utils/api.ts`)
```typescript
// –°–ø–µ—Ü—ñ–∞–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –¥–ª—è 401 Unauthorized
if (response.status === 401) {
  const error = new Error('–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞. –ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å.');
  error.name = 'UnauthorizedError';
  throw error;
}
```

### 2. **Error Handler utility** (`/utils/errorHandler.ts`)
```typescript
export function handleApiError(error: unknown, defaultMessage: string) {
  if (error instanceof Error && error.name === 'UnauthorizedError') {
    // –í–∏–∫–ª–∏–∫–∞—î –≥–ª–æ–±–∞–ª—å–Ω–∏–π logout –±–µ–∑ –¥—É–±–ª—é–≤–∞–Ω–Ω—è toast
    window.dispatchEvent(new Event('unauthorized'));
  } else {
    toast.error(message);
  }
}
```

### 3. **–ì–ª–æ–±–∞–ª—å–Ω–∏–π –æ–±—Ä–æ–±–Ω–∏–∫ –≤ AdminPanel** (`/pages/AdminPanel.tsx`)

–î–æ–¥–∞–Ω–æ event listener –¥–ª—è `unauthorized` –ø–æ–¥—ñ—ó:

```typescript
const handleUnauthorized = () => {
  // –ü–æ–∫–∞–∑–∞—Ç–∏ —á—ñ—Ç–∫–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
  toast.error('–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å! –í–∏ –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ—Å–ø—Ä—è–º–æ–≤–∞–Ω—ñ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –≤—Ö–æ–¥—É.', {
    duration: 5000,
  });
  
  // –ó–∞—Ç—Ä–∏–º–∫–∞ –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
  setTimeout(() => {
    setIsAuthenticated(false);
    setPassword('');
    sessionStorage.removeItem('adminPassword');
    setLoginError('‚ö†Ô∏è –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞. –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –ø–∞—Ä–æ–ª—å: admin123');
  }, 1000);
};
```

### 4. **–ü–æ–∫—Ä–∞—â–µ–Ω–∏–π –µ–∫—Ä–∞–Ω –≤—Ö–æ–¥—É**

–ö–æ–ª–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –ø—ñ—Å–ª—è 401:

- üî¥ –ß–µ—Ä–≤–æ–Ω–∞ —Ä–∞–º–∫–∞ –Ω–∞–≤–∫–æ–ª–æ –ø–æ–ª—è –ø–∞—Ä–æ–ª—è
- üì¢ –í–µ–ª–∏–∫–µ —á–µ—Ä–≤–æ–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –ø–æ—è—Å–Ω–µ–Ω–Ω—è–º
- üé≠ Shake –∞–Ω—ñ–º–∞—Ü—ñ—è —ñ–∫–æ–Ω–∫–∏ –∑–∞–º–∫–∞
- üí° –ü—ñ–¥–∫–∞–∑–∫–∞ –∑—ñ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–º –ø–∞—Ä–æ–ª–µ–º
- ‚ÑπÔ∏è –î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é

### 5. **–°–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π –µ–∫—Ä–∞–Ω –≤ OrdersManager**

–Ø–∫—â–æ 401 –≤–∏—è–≤–ª–µ–Ω–æ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –∑–∞–º–æ–≤–ª–µ–Ω—å:

```tsx
<Card className="bg-card/50 backdrop-blur-sm border-destructive/50">
  <CardContent className="pt-6">
    <div className="text-center space-y-6">
      <div className="w-20 h-20 rounded-full bg-destructive/10 animate-pulse">
        <span className="text-4xl">üîí</span>
      </div>
      <h3 className="text-2xl font-semibold text-destructive">
        –î–æ—Å—Ç—É–ø –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ
      </h3>
      <p>–í–∏ –≤–≤–µ–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞.</p>
      <code className="block mt-2 bg-background/70 px-4 py-2 rounded">
        admin123
      </code>
      <div className="flex items-center gap-2">
        <Loader2 className="w-3 h-3 animate-spin" />
        <span>–ü–µ—Ä–µ—Å–ø—Ä—è–º—É–≤–∞–Ω–Ω—è...</span>
      </div>
    </div>
  </CardContent>
</Card>
```

### 6. **CSS –∞–Ω—ñ–º–∞—Ü—ñ—è shake** (`/styles/globals.css`)

```css
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
  20%, 40%, 60%, 80% { transform: translateX(5px); }
}

.animate-shake {
  animation: shake 0.5s ease-in-out;
}
```

### 7. **–£–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –≤ —É—Å—ñ—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–∞—Ö**

–í—Å—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Ç–µ–ø–µ—Ä –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å `handleApiError`:

- ‚úÖ ServicesManager
- ‚úÖ ContactsManager  
- ‚úÖ BrandingManager
- ‚úÖ HeroImagesManager
- ‚úÖ DiscountManager
- ‚úÖ OrdersManager

## –ü–æ—Ç—ñ–∫ —Ä–æ–±–æ—Ç–∏

### –ü—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å (admin123)
```
–í–≤–µ–¥–µ–Ω–Ω—è ‚Üí –í—Ö—ñ–¥ ‚Üí ‚úÖ –î–æ—Å—Ç—É–ø –¥–æ –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—ñ
```

### –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å (test123)
```
–í–≤–µ–¥–µ–Ω–Ω—è ‚Üí –í—Ö—ñ–¥ ‚Üí API –∑–∞–ø–∏—Ç ‚Üí 401 ‚Üí 
UnauthorizedError ‚Üí Toast –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è ‚Üí
–ó–∞—Ç—Ä–∏–º–∫–∞ 1 —Å–µ–∫ ‚Üí –†–æ–∑–ª–æ–≥—ñ–Ω–µ–Ω–Ω—è ‚Üí 
–ï–∫—Ä–∞–Ω –≤—Ö–æ–¥—É –∑ –ø–æ–º–∏–ª–∫–æ—é + –ø—ñ–¥–∫–∞–∑–∫–∞
```

## UX –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

### –î–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:
- ‚ùå –ú–Ω–æ–∂–∏–Ω–Ω—ñ –ø–æ–º–∏–ª–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª—ñ
- ‚ùå –ù–µ–∑—Ä–æ–∑—É–º—ñ–ª—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- ‚ùå –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –∑–Ω–∞—î, —â–æ —Ä–æ–±–∏—Ç–∏
- ‚ùå –ù–µ–º–∞—î –≤—ñ–∑—É–∞–ª—å–Ω–æ–≥–æ feedback

### –ü—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:
- ‚úÖ –û–¥–Ω–µ —á—ñ—Ç–∫–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–µ—Ä–µ—Å–ø—Ä—è–º—É–≤–∞–Ω–Ω—è
- ‚úÖ –í—ñ–∑—É–∞–ª—å–Ω—ñ –ø—ñ–¥–∫–∞–∑–∫–∏ (—á–µ—Ä–≤–æ–Ω–∏–π –∫–æ–ª—ñ—Ä, shake)
- ‚úÖ –ö–æ–¥ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è –≤–∏–¥—ñ–ª–µ–Ω–∏–π
- ‚úÖ –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É
- ‚úÖ –ü–ª–∞–≤–Ω—ñ –∞–Ω—ñ–º–∞—Ü—ñ—ó –ø–µ—Ä–µ—Ö–æ–¥—ñ–≤

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –ö—Ä–æ–∫ 1: –í–≤–µ—Å—Ç–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å
```
–ü–∞—Ä–æ–ª—å: test123
```

**–û—á—ñ–∫—É—î—Ç—å—Å—è:**
1. Toast: "–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å! –í–∏ –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ—Å–ø—Ä—è–º–æ–≤–∞–Ω—ñ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –≤—Ö–æ–¥—É."
2. –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è –µ–∫—Ä–∞–Ω "–î–æ—Å—Ç—É–ø –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ" –∑ –∞–Ω—ñ–º–∞—Ü—ñ—î—é
3. –ß–µ—Ä–µ–∑ 1 —Å–µ–∫ - –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –Ω–∞ –µ–∫—Ä–∞–Ω –≤—Ö–æ–¥—É
4. –ß–µ—Ä–≤–æ–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: "‚ö†Ô∏è –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞..."
5. –ü–æ–ª–µ –ø–∞—Ä–æ–ª—è –∑ —á–µ—Ä–≤–æ–Ω–æ—é —Ä–∞–º–∫–æ—é
6. Shake –∞–Ω—ñ–º–∞—Ü—ñ—è —ñ–∫–æ–Ω–∫–∏ –∑–∞–º–∫–∞

### –ö—Ä–æ–∫ 2: –í–≤–µ—Å—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å
```
–ü–∞—Ä–æ–ª—å: admin123
```

**–û—á—ñ–∫—É—î—Ç—å—Å—è:**
1. Toast: "–£—Å–ø—ñ—à–Ω–∏–π –≤—Ö—ñ–¥!"
2. –ü–µ—Ä–µ—Ö—ñ–¥ –¥–æ –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—ñ
3. –î–æ—Å—Ç—É–ø –¥–æ –≤—Å—ñ—Ö —Ñ—É–Ω–∫—Ü—ñ–π

## –§–∞–π–ª–∏ –∑–º—ñ–Ω–µ–Ω—ñ

1. `/utils/api.ts` - –°–ø–µ—Ü—ñ–∞–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ 401
2. `/utils/errorHandler.ts` - –ù–æ–≤–∏–π helper –¥–ª—è –ø–æ–º–∏–ª–æ–∫
3. `/pages/AdminPanel.tsx` - –ì–ª–æ–±–∞–ª—å–Ω–∏–π –æ–±—Ä–æ–±–Ω–∏–∫ unauthorized
4. `/components/admin/OrdersManager.tsx` - –°–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π UI –¥–ª—è 401
5. `/components/admin/ServicesManager.tsx` - –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è errorHandler
6. `/components/admin/ContactsManager.tsx` - –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è errorHandler
7. `/components/admin/BrandingManager.tsx` - –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è errorHandler
8. `/components/admin/HeroImagesManager.tsx` - –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è errorHandler
9. `/components/admin/DiscountManager.tsx` - –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è errorHandler
10. `/styles/globals.css` - Shake –∞–Ω—ñ–º–∞—Ü—ñ—è

## –î–æ–¥–∞—Ç–∫–æ–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

–°—Ç–≤–æ—Ä–µ–Ω–æ `/AUTH_SYSTEM.md` –∑ –ø–æ–≤–Ω–∏–º –æ–ø–∏—Å–æ–º —Å–∏—Å—Ç–µ–º–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó.

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–ò–ü–†–ê–í–õ–ï–ù–û

–¢–µ–ø–µ—Ä —Å–∏—Å—Ç–µ–º–∞ —á—ñ—Ç–∫–æ –ø–æ–≤—ñ–¥–æ–º–ª—è—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –ø—Ä–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å —Ç–∞ –Ω–∞–¥–∞—î –∑—Ä–æ–∑—É–º—ñ–ª—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è.
